import{u as v,j as e,O as m,F as x,f as b,a,B as h,r as j,b as f,W as N,k as C,c as y,d as E,e as S,R as A,C as F,g as p,h as I,E as T,A as k,i as q}from"./index-bTUwIonv.js";import{g as w}from"./usuario.service-zk_Jnda4.js";const D=({state:r,handleToggle:l})=>{const{register:n,handleSubmit:d,reset:i,formState:{errors:s}}=v(),u=c=>console.log(c),o=()=>{l(!1),i()};return e.jsx(e.Fragment,{children:e.jsxs(m,{show:r,onHide:o,placement:"end",children:[e.jsxs(m.Header,{children:[e.jsxs(m.Title,{children:[" ",e.jsx("h2",{children:"Agregar usuario"})," "]}),e.jsx("div",{className:"btn-close",onClick:o,children:e.jsx(x,{icon:b})})]}),e.jsx(m.Body,{children:e.jsxs(a,{onSubmit:d(u),className:"position-relative h-100",children:[e.jsxs(a.Group,{className:"mb-1",controlId:"name",children:[e.jsx(a.Label,{children:"Nombre"}),e.jsx(a.Control,{isInvalid:!!s.name,type:"text",placeholder:"Nombre del usuario...",...n("name",{required:!0,maxLength:100})}),s.name&&e.jsx(a.Text,{className:"text-danger",children:"Este campo es requerido"})]}),e.jsxs(a.Group,{className:"mb-1",controlId:"email",children:[e.jsx(a.Label,{children:"Correo"}),e.jsx(a.Control,{isInvalid:!!s.email,type:"email",placeholder:"Correo del usuario...",...n("email",{required:!0}),"aria-invalid":s.email?"true":"false"}),s.email&&e.jsx(a.Text,{className:"text-danger",children:"Este campo es requerido"})]}),e.jsxs(a.Group,{className:"mb-1",controlId:"state",children:[e.jsx(a.Label,{children:"Estado"}),e.jsxs(a.Select,{isInvalid:!!s.status,"aria-label":"Default select example",...n("status",{required:!0}),"aria-invalid":s.status?"true":"false",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"})]}),s.status&&e.jsx(a.Text,{className:"text-danger",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-10",style:{position:"absolute",bottom:"30px",width:"100%"},children:[e.jsx(h,{variant:"secondary",className:"border-0 me-1",onClick:o,children:e.jsx("span",{className:"text-dark",children:"Cancelar"})}),e.jsx(h,{variant:"primary",type:"submit",children:"Agregar usuario"})]})]})})]})})},P=({params:r})=>{const[l,n]=j.useState(1),[d,i]=j.useState(10),{data:s,isError:u,isLoading:o}=f({queryKey:["usuarios",l,r],queryFn:()=>w({page:l,...r}),placeholderData:C}),c=[{name:"USUARIO",selector:t=>t.nombre},{name:"CORREO",selector:t=>t.correo},{name:"ESTADO",selector:t=>t.estado,cell:t=>e.jsx("div",{children:t.estado==="activo"?e.jsx("span",{className:"active-badge",children:"Activo"}):e.jsx("span",{className:"inactive-badge",children:"Inactivo"})})}];return e.jsx(N,{title:"",columns:c,isLoading:o,isError:u,data:(s==null?void 0:s.data)??[],recordsTotals:(s==null?void 0:s.recordsTotals)??0,countPerPage:d,setCountPerPage:i,page:l,setPage:n,handleClick:()=>{},handleDoubleClick:()=>{},isExpandable:!1})},g={state:"",search:""},B=()=>{const[r,l]=j.useState(g),n=y(r,2e3),{state:d,toggle:i}=E(!1),s=c=>{l(t=>({...t,[c.target.name]:c.target.value}))},u=()=>{l(g)},o=S(n);return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"my-2",children:"Usuarios"}),e.jsx(A,{children:e.jsx(F,{children:e.jsxs(p,{children:[e.jsxs(p.Header,{className:"d-flex",children:[e.jsx("h3",{children:"Filtro"}),o>0?e.jsxs(h,{variant:"link",onClick:u,children:["Limpiar filtros ",e.jsx(x,{icon:q})]}):null]}),e.jsx("div",{className:"card-header-inputs ",children:e.jsxs("div",{className:"w-100 row mt-2 mb-2 ps-1 pe-1",children:[e.jsx("div",{className:"col-12 col-lg-4 ",children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",name:"search",className:"form-control",placeholder:"Buscar usuario...",value:r.search||"",onChange:s}),e.jsx("button",{className:"btn btn-outline-secondary",type:"button",disabled:!0,children:e.jsx(x,{icon:I})})]})}),e.jsx("div",{className:"col-12 col-lg-3 mt-2 mt-lg-0",children:e.jsxs("select",{name:"state",className:"form-select",onChange:s,value:r.state||"",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Estado"}),e.jsx("option",{value:"activo",children:"Activo"}),e.jsx("option",{value:"inactivo",children:"Inactivo"})]})}),e.jsxs("div",{className:"col-12 col-lg-5 d-flex gap-2 justify-content-between mt-2 mt-lg-0",children:[e.jsx(T,{}),e.jsx(k,{title:"Agregar usuario",handleClick:i})]})]})}),e.jsx(P,{params:n})]})})}),e.jsx(D,{state:d,handleToggle:i})]})};export{B as default};
